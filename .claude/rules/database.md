---
paths:
  - "prisma/**"
  - "src/actions/**/*.ts"
  - "supabase/**"
---

# Database Rules

- Access exclusively through Prisma (`@/lib/prisma`).
- Map camelCase (TypeScript) to snake_case (PostgreSQL) with `@map()` and `@@map()`.
- IDs are UUIDs generated by PostgreSQL (`gen_random_uuid()`).
- Vote counting is managed by **PostgreSQL triggers**, not application code.
- Unique constraints (`@@unique`) are the safety net against race conditions.
- SQL migrations go in `supabase/migrations/`.
- After changing the Prisma schema, run `npx prisma generate`.
